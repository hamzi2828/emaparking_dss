jQuery((function(e){e.fn.bravoAutocomplete=function(a){var t=void 0!==a.key?a.key:"id";return this.each((function(){var o,n=e(this),i=e(this).closest(".smart-search"),r=a.textLoading;if(i.append('<div class="bravo-autocomplete on-message"><div class="list-item"></div><div class="message">'+r+"</div></div>"),e(document).on("click.Bst",(function(e){0!==i.has(e.target).length||i.is(e.target)?a.dataDefault.length>0&&i.find(".bravo-autocomplete").addClass("show"):i.find(".bravo-autocomplete").removeClass("show")})),a.dataDefault.length>0){var s="";for(var l in a.dataDefault){var d=a.dataDefault[l];s+='<div class="item" data-id="'+d[t]+'" data-text="'+d.title+'"> <i class="'+a.iconItem+'"></i> '+d.title+" </div>"}i.find(".bravo-autocomplete .list-item").html(s),i.find(".bravo-autocomplete").removeClass("on-message")}void 0!==a.url&&a.url&&n.keyup((function(){i.find(".bravo-autocomplete").addClass("on-message"),i.find(".bravo-autocomplete .message").html(r),i.find(".child_id").val("");var n=e(this).val();if(clearTimeout(o),0!==n.length)o=setTimeout((function(){e.ajax({url:a.url,data:{search:n},dataType:"json",type:"get",beforeSend:function(){},success:function(e){if(1===e.status){var o="";for(var r in e.data){var s=e.data[r];o+='<div class="item" data-id="'+s[t]+'" data-text="'+s.title+'"> <i class="'+a.iconItem+'"></i> '+(l=s.title,d=n,l.replace(new RegExp(d+"(?!([^<]+)?>)","gi"),'<span class="h-line">$&</span>'))+(s.desc?'<span class="item-desc">'+s.desc+"</span>":"")+" </div>"}i.find(".bravo-autocomplete .list-item").html(o),i.find(".bravo-autocomplete").removeClass("on-message")}var l,d;void 0===typeof e.message?i.find(".bravo-autocomplete").addClass("on-message"):i.find(".bravo-autocomplete .message").html(e.message)}})}),700),i.find(".bravo-autocomplete").addClass("show");else if(a.dataDefault.length>0){var s="";for(var l in a.dataDefault){var d=a.dataDefault[l];s+='<div class="item" data-id="'+d[t]+'" data-text="'+d.title+'"> <i class="'+a.iconItem+'"></i> '+d.title+" </div>"}i.find(".bravo-autocomplete .list-item").html(s),i.find(".bravo-autocomplete").removeClass("on-message")}else i.find(".bravo-autocomplete").removeClass("show")})),i.find(".bravo-autocomplete").on("click",".item",(function(){var a=e(this).attr("data-id"),t=e(this).attr("data-text");a.length>0&&t.length>0?(t=t.replace(/-/g,""),t=c(t," "),t=c(t,"-"),i.find(".parent_text").val(t).trigger("change"),i.find(".child_id").val(a).trigger("change")):console.log("Cannot select!"),setTimeout((function(){i.find(".bravo-autocomplete").removeClass("show")}),100)}));var c=function(e,a){return"]"===a&&(a="\\]"),"\\"===a&&(a="\\\\"),e.replace(new RegExp("^["+a+"]+|["+a+"]+$","g"),"")}}))}})),jQuery((function(e){function a(e){return e.responseJSON&&e.responseJSON.errors?Object.values(e.responseJSON.errors).join("<br>"):""}e(".g-map-place").each((function(){var a=e(this).find(".map").attr("id"),t=e(this).find("input[name=map_place]"),o=e(this).find('input[name="map_lat"]'),n=e(this).find('input[name="map_lgn"]');new BravoMapEngine(a,{fitBounds:!0,center:[51.505,-.09],ready:function(e){e.searchBox(t,(function(e){o.attr("value",e[0]),n.attr("value",e[1])}))}})})),e(".bravo-form-search-slider .effect").each((function(){e(this).find(".owl-carousel").owlCarousel({items:1,loop:!0,margin:0,nav:!1,autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!1,animateOut:"fadeOut"})})),e(".bravo-form-search-all.carousel_v2").each((function(){e(this).find(".owl-carousel").owlCarousel({items:1,loop:!0,margin:0,nav:!1,autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!1,animateOut:"fadeOut"})})),e(".bravo-form-search-tour.carousel_v2  .effect").each((function(){e(this).find(".owl-carousel").owlCarousel({items:1,loop:!0,margin:0,nav:!1,autoplay:!0,autoplayTimeout:5e3,autoplayHoverPause:!1,animateOut:"fadeOut"})})),e(".bravo-list-tour.carousel").each((function(){e(this).find(".owl-carousel").owlCarousel({items:4,loop:!1,margin:15,nav:!1,responsive:{0:{items:1},768:{items:2},1e3:{items:4}}})})),e(".bravo-box-category-tour").each((function(){e(this).find(".owl-carousel").owlCarousel({items:4,loop:!0,margin:30,nav:!1,dots:!0,responsive:{0:{items:1},768:{items:2},1e3:{items:4}}})})),e(".bravo-client-feedback").each((function(){e(this).find(".owl-carousel").owlCarousel({items:1,loop:!0,margin:0,nav:!0,dots:!1})})),e(".bravo-list-tour.carousel_simple").each((function(){e(this).find(".owl-carousel").owlCarousel({items:3,loop:!1,margin:15,nav:!1,responsive:{0:{items:1},768:{items:2},1e3:{items:3}}})})),e(".bravo-list-space").each((function(){e(this).find(".owl-carousel").owlCarousel({items:3,loop:!1,margin:15,nav:!1,responsive:{0:{items:1},768:{items:2},1e3:{items:3}}})})),e(".bravo-list-hotel").each((function(){e(this).find(".owl-carousel").owlCarousel({items:4,loop:!1,margin:15,nav:!1,responsive:{0:{items:1},768:{items:2},1e3:{items:4}}})})),e(".bravo-list-car").each((function(){e(this).find(".owl-carousel").owlCarousel({items:4,loop:!1,margin:15,nav:!1,responsive:{0:{items:1},768:{items:2},1e3:{items:4}}})})),e(".bravo-list-boat").each((function(){e(this).find(".owl-carousel").owlCarousel({items:4,loop:!1,margin:15,nav:!1,responsive:{0:{items:1},768:{items:2},1e3:{items:4}}})})),e(".bravo-list-event").each((function(){e(this).find(".owl-carousel").owlCarousel({items:4,loop:!1,margin:15,nav:!1,responsive:{0:{items:1},768:{items:2},1e3:{items:4}}})})),e(".bravo_fullHeight").each((function(){var a=e(document).height();e(document).find(".bravo-admin-bar").length>0&&(a-=e(".bravo-admin-bar").height()),e(this).css("min-height",a)})),e(".form-date-search").each((function(){var a=!1;e(this).hasClass("is_single_picker")&&(a=!0);var t=new Date,o=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0),n=e(this),i=e(".date-wrapper",n),r=e(".check-in-input",n),s=e(".check-out-input",n),l=e(".check-in-out",n),d=e(".check-in-render",n),c=e(".check-out-render",n),m={singleDatePicker:a,autoApply:!0,disabledPast:!0,customClass:"",widthSingle:300,onlyShowCurrentMonth:!0,minDate:o,opens:bookingCore.rtl?"right":"left",locale:{format:"YYYY-MM-DD",direction:bookingCore.rtl?"rtl":"ltr",firstDay:daterangepickerLocale.first_day_of_week}};"object"==typeof daterangepickerLocale&&(m.locale=_.merge(daterangepickerLocale,m.locale)),l.daterangepicker(m,(function(e,a,t){r.val(e.format('"YYYY-MM-DD"')),d.html(e.format(bookingCore.date_format)),s.val(a.format('"YYYY-MM-DD"')),c.html(a.format(bookingCore.date_format))})),i.click((function(e){l.trigger("click")}))})),e(".date-picker").each((function(){var a={singleDatePicker:!0,opens:bookingCore.rtl?"right":"left",locale:{format:bookingCore.date_format,direction:bookingCore.rtl?"rtl":"ltr",firstDay:daterangepickerLocale.first_day_of_week}};"object"==typeof daterangepickerLocale&&(a.locale=_.merge(daterangepickerLocale,a.locale)),e(this).daterangepicker(a)})),e(".form-date-search-hotel").each((function(){var a=new Date,t=new Date(a.getFullYear(),a.getMonth(),a.getDate(),0,0,0,0),o=e(this),n=e(".date-wrapper",o),i=e(".check-in-input",o),r=e(".check-out-input",o),s=e(".check-in-out",o),l=e(".check-in-render",o),d=e(".check-out-render",o),c={singleDatePicker:!1,autoApply:!0,disabledPast:!0,customClass:"",widthSingle:300,onlyShowCurrentMonth:!0,minDate:t,opens:bookingCore.rtl?"right":"left",locale:{format:"YYYY-MM-DD",direction:bookingCore.rtl?"rtl":"ltr",firstDay:daterangepickerLocale.first_day_of_week}};"object"==typeof daterangepickerLocale&&(c.locale=_.merge(daterangepickerLocale,c.locale)),s.daterangepicker(c).on("apply.daterangepicker",(function(e,a){a.endDate.diff(a.startDate,"day")<=0&&a.endDate.add(1,"day"),i.val(a.startDate.format(bookingCore.date_format)),l.html(a.startDate.format(bookingCore.date_format)),r.val(a.endDate.format(bookingCore.date_format)),d.html(a.endDate.format(bookingCore.date_format)),s.val(a.startDate.format("YYYY-MM-DD")+" - "+a.endDate.format("YYYY-MM-DD"))})),n.click((function(e){s.trigger("click")}))})),e(".review-form .review-items .rates .fa").each((function(){var a=e(this).parent(),t=a.children(),o=e(this).index(),n=a.parent();e(this).hover((function(){for(var a=0;a<t.length&&a<=o;a++)e(t[a]).addClass("hovered");e(this).click((function(){for(var a=0;a<t.length;a++)a<=o?e(t[a]).addClass("selected"):e(t[a]).removeClass("selected");n.children(".review_stats").val(o+1)}))}),(function(){t.removeClass("hovered")}))})),window.ajax_error_to_string=function(e){if(void 0!==e.responseJSON){if(e.responseJSON.errors){var a=[];for(var t in e.responseJSON.errors)a.push(e.responseJSON.errors[t].join("<br/>"));return a.join("<br/>")}if(e.responseJSON.message)return e.responseJSON.message}},e(".bravo-form-login [type=submit]").click((function(a){a.preventDefault();let t=e(this).closest(".bravo-form-login");var o=t.find("input[name=redirect]").val();e.ajax({url:bookingCore.url+"/login",data:{email:t.find("input[name=email]").val(),password:t.find("input[name=password]").val(),remember:t.find("input[name=remember]").is(":checked")?1:"","g-recaptcha-response":t.find("[name=g-recaptcha-response]").val(),redirect:t.find("input[name=redirect]").val()},method:"POST",beforeSend:function(){t.find(".error").hide(),t.find(".icon-loading").css("display","inline-block")},dataType:"json",success:function(e){if(e.two_factor)return window.location.href=bookingCore.url+"/two-factor-challenge";if(t.find(".icon-loading").hide(),!0===e.error){if(void 0!==e.messages)for(var a in e.messages){var n=e.messages[a];t.find(".error-"+a).show().text(n[0])}void 0!==e.messages.message_error&&t.find(".message-error").show().html('<div class="alert alert-danger">'+e.messages.message_error[0]+"</div>")}e.message&&t.find(".message-error").show().html('<div class="alert alert-danger">'+e.message+"</div>"),"undefined"!=typeof BravoReCaptcha&&(BravoReCaptcha.reset("login"),BravoReCaptcha.reset("login_normal")),o.trim("/")?window.location.href=bookingCore.url_root+t.find("input[name=redirect]").val():window.location.reload()},error:function(e){t.find(".icon-loading").hide();var a=ajax_error_to_string(e);"undefined"!=typeof BravoReCaptcha&&(BravoReCaptcha.reset("login"),BravoReCaptcha.reset("login_normal")),a&&t.find(".message-error").show().html('<div class="alert alert-danger">'+a+"</div>")}})})),e(".bravo-form-register [type=submit]").click((function(a){a.preventDefault();let t=e(this).closest(".bravo-form-register");e.ajaxSetup({headers:{"X-CSRF-TOKEN":t.find('meta[name="csrf-token"]').attr("content")}}),e.ajax({url:bookingCore.routes.register,data:{email:t.find("input[name=email]").val(),password:t.find("input[name=password]").val(),first_name:t.find("input[name=first_name]").val(),last_name:t.find("input[name=last_name]").val(),phone:t.find("input[name=phone]").val(),term:t.find("input[name=term]").is(":checked")?1:"","g-recaptcha-response":t.find("[name=g-recaptcha-response]").val()},type:"POST",beforeSend:function(){t.find(".error").hide(),t.find(".icon-loading").css("display","inline-block")},success:function(e){if(t.find(".icon-loading").hide(),!0===e.error){if(void 0!==e.messages)for(var a in e.messages){var o=e.messages[a];t.find(".error-"+a).show().text(o[0])}void 0!==e.messages.message_error&&t.find(".message-error").show().html('<div class="alert alert-danger">'+e.messages.message_error[0]+"</div>")}"undefined"!=typeof BravoReCaptcha&&(BravoReCaptcha.reset("register"),BravoReCaptcha.reset("register_normal")),void 0!==e.redirect&&(window.location.href=e.redirect)},error:function(e){t.find(".icon-loading").hide(),void 0!==e.responseJSON&&void 0!==e.responseJSON.message&&t.find(".message-error").show().html('<div class="alert alert-danger">'+e.responseJSON.message+"</div>"),"undefined"!=typeof BravoReCaptcha&&(BravoReCaptcha.reset("register"),BravoReCaptcha.reset("register_normal"))}})})),e("#register").on("show.bs.modal",(function(a){e("#login").modal("hide")})),e("#login").on("show.bs.modal",(function(a){e("#register").modal("hide")}));var t=!1;function o(e){var a=parseInt(e.find("[name=adults]").val()),t=parseInt(e.find("[name=children]").val()),o=e.find(".render .adults .multi").data("html");console.log(e,o),e.find(".render .adults .multi").html(o.replace(":count",a));var n=e.find(".render .children .multi").data("html");e.find(".render .children .multi").html(n.replace(":count",t)),a>1?(e.find(".render .adults .multi").removeClass("d-none"),e.find(".render .adults .one").addClass("d-none")):(e.find(".render .adults .multi").addClass("d-none"),e.find(".render .adults .one").removeClass("d-none")),t>1?(e.find(".render .children .multi").removeClass("d-none"),e.find(".render .children .one").addClass("d-none")):(e.find(".render .children .multi").addClass("d-none"),e.find(".render .children .one").removeClass("d-none").html(e.find(".render .children .one").data("html").replace(":count",t)))}function n(e){var a=e.closest(".form-select-seat-type"),t=e.attr("id"),o=parseInt(e.val()),n=a.find("[id="+t+"_render]"),i=n.find(".multi").data("html"),r=e.attr("min");console.log(n),o>r?(n.find(".multi").removeClass("d-none").html(i.replace(":count",o)),n.find(".one").addClass("d-none")):(n.find(".multi").addClass("d-none"),n.find(".one").removeClass("d-none"))}e(".bravo-subscribe-form").submit((function(o){if(o.preventDefault(),!t){e(this).addClass("loading");var n=e(this);return n.find(".form-mess").html(""),e.ajax({url:n.attr("action"),type:"post",data:e(this).serialize(),dataType:"json",success:function(e){t=!1,n.removeClass("loading"),e.message&&n.find(".form-mess").html('<span class="'+(e.status?"text-success":"text-danger")+'">'+e.message+"</span>"),e.status&&n.find("input").val("")},error:function(e){console.log(e),t=!1,n.removeClass("loading"),a(e)?n.find(".form-mess").html('<span class="text-danger">'+a(e)+"</span>"):e.responseText&&n.find(".form-mess").html('<span class="text-danger">'+e.responseText+"</span>")}}),!1}})),e(".bravo-more-menu").click((function(){e(this).trigger("bravo-trigger-menu-mobile")})),e(".bravo-menu-mobile .b-close").click((function(){e(".bravo-more-menu").trigger("bravo-trigger-menu-mobile")})),e(document).on("click",".bravo-effect-bg",(function(){e(".bravo-more-menu").trigger("bravo-trigger-menu-mobile")})),e(document).on("bravo-trigger-menu-mobile",".bravo-more-menu",(function(){e(this).toggleClass("active"),e(this).hasClass("active")?(e(".bravo-menu-mobile").addClass("active"),e("body").css("overflow","hidden").append("<div class='bravo-effect-bg'></div>")):(e(".bravo-menu-mobile").removeClass("active"),e("body").css("overflow","initial").find(".bravo-effect-bg").remove())})),e(".bravo-menu-mobile .g-menu ul li .fa").click((function(a){a.preventDefault(),e(this).closest("li").toggleClass("active")})),e(".bravo-menu-mobile").each((function(){var a=e(this).find(".user-profile").height(),t=e(window).height();e(this).find(".g-menu").css("max-height",t-a-15)})),e(".bravo-more-menu-user").click((function(){e(".bravo_user_profile > .container-fluid > .row > .col-md-3").addClass("active"),e("body").css("overflow","hidden").append("<div class='bravo-effect-user-bg'></div>")})),e(document).on("click",".bravo-effect-user-bg,.bravo-close-menu-user",(function(){e(".bravo_user_profile > .container-fluid > .row > .col-md-3").removeClass("active"),e("body").css("overflow","initial").find(".bravo-effect-user-bg").remove()})),e('[data-toggle="tooltip"]').tooltip(),e(".dropdown-toggle").dropdown(),e(".select-guests-dropdown .btn-minus").click((function(a){a.stopPropagation();var t=e(this).closest(".form-select-guests"),n=t.find(".select-guests-dropdown [name="+e(this).data("input")+"]"),i=parseInt(n.attr("min")),r=parseInt(n.val());r<=i||(n.val(r-1),o(t))})),e(".select-guests-dropdown .btn-add").click((function(a){a.stopPropagation();var t=e(this).closest(".form-select-guests"),n=t.find(".select-guests-dropdown [name="+e(this).data("input")+"]"),i=parseInt(n.attr("max")),r=parseInt(n.val());r>=i||(n.val(r+1),o(t))})),e(".select-guests-dropdown input").keyup((function(a){o(e(this).closest(".form-select-guests"))})),e(".select-guests-dropdown input").change((function(a){o(e(this).closest(".form-select-guests"))})),e(".select-guests-dropdown .dropdown-item-row").click((function(e){e.stopPropagation()})),e(".select-seat-type-dropdown .btn-minus").on("click",(function(a){a.stopPropagation();var t=e(this).closest(".form-select-seat-type"),o=e(this).data("input-attr");void 0===o&&(o="name");var i=t.find(".select-seat-type-dropdown ["+o+"="+e(this).data("input")+"]"),r=parseInt(i.attr("min")),s=parseInt(i.val());s<=r||(i.val(s-1),n(i))})),e(".select-seat-type-dropdown .btn-add").on("click",(function(a){a.stopPropagation();var t=e(this).closest(".form-select-seat-type"),o=e(this).data("input-attr");void 0===o&&(o="name");var i=t.find(".select-seat-type-dropdown ["+o+"="+e(this).data("input")+"]"),r=parseInt(i.attr("max")),s=parseInt(i.val());s>=r||(i.val(s+1),n(i))})),e(".select-seat-type-dropdown input").on("keyup",(function(a){n(e(this))})),e(".select-seat-type-dropdown input").on("change",(function(a){n(e(this))})),e(".select-seat-type-dropdown .dropdown-item-row").on("click",(function(e){e.stopPropagation()})),e(".smart-search .smart-search-location").each((function(){var a=e(this),t=a.attr("data-default"),o=[];t.length>0&&(o=JSON.parse(t));var n=a.data("url"),i=a.data("key"),r={url:n||bookingCore.url+"/location/search/searchForSelect2",dataDefault:o,textLoading:a.attr("data-onLoad"),iconItem:"icofont-location-pin",key:i||"id"};a.bravoAutocomplete(r)})),e(".smart-search .smart-select").each((function(){var a=e(this),t=a.attr("data-default"),o=[];t.length>0&&(o=JSON.parse(t));var n={dataDefault:o,iconItem:"",textLoading:a.attr("data-onLoad")};a.bravoAutocomplete(n)})),e(document).on("click",".service-wishlist",(function(){var a=e(this);e.ajax({url:bookingCore.url+"/user/wishlist",data:{object_id:a.attr("data-id"),object_model:a.attr("data-type")},dataType:"json",type:"POST",beforeSend:function(){a.addClass("loading")},success:function(e){a.attr("class","service-wishlist "+e.class)},error:function(a){401===a.status&&e("#login").modal("show")}})})),e(".bravo-video-popup").click((function(){let a=e(this).data("src"),t=e(this).data("target");e(t).find(".bravo_embed_video").attr("src",a+"?autoplay=0&amp;modestbranding=1&amp;showinfo=0"),e(t).on("hidden.bs.modal",(function(){e(t).find(".bravo_embed_video").attr("src","")}))}));var i=!1;e(".bravo-contact-block-form").submit((function(t){if(t.preventDefault(),!i){e(this).addClass("loading");var o=e(this);return o.find(".form-mess").html(""),e.ajax({url:o.attr("action"),type:"post",data:e(this).serialize(),dataType:"json",success:function(e){i=!1,o.removeClass("loading"),e.message&&o.find(".form-mess").html('<span class="'+(e.status?"text-success":"text-danger")+'">'+e.message+"</span>"),e.status&&(o.find("input").val(""),o.find("textarea").val("")),"undefined"!=typeof BravoReCaptcha&&BravoReCaptcha.reset("contact")},error:function(e){console.log(e),i=!1,o.removeClass("loading"),a(e)?o.find(".form-mess").html('<span class="text-danger">'+a(e)+"</span>"):e.responseText&&o.find(".form-mess").html('<span class="text-danger">'+e.responseText+"</span>"),"undefined"!=typeof BravoReCaptcha&&BravoReCaptcha.reset("contact")}}),!1}})),e(".btn-submit-enquiry").click((function(a){a.preventDefault();let t=e(this).closest(".enquiry_form_modal_form");e.ajax({url:bookingCore.url+"/booking/addEnquiry",data:t.find("textarea,input,select").serialize(),dataType:"json",type:"post",beforeSend:function(){t.find(".message_box").html("").hide(),t.find(".icon-loading").css("display","inline-block")},success:function(e){if(e.errors)for(var a in e.message="",e.errors)e.message+=e.errors[a].join("<br>")+"<br>";e.message&&(e.status?t.find(".message_box").append('<div class="text text-success">'+e.message+"</div>").show():t.find(".message_box").append('<div class="text text-danger">'+e.message+"</div>").show()),t.find(".icon-loading").hide(),e.status&&t.find("textarea").val(""),"undefined"!=typeof BravoReCaptcha&&BravoReCaptcha.reset("enquiry_form")},error:function(e){"undefined"!=typeof BravoReCaptcha&&BravoReCaptcha.reset("enquiry_form"),t.find(".icon-loading").hide()}})})),e(".review_upload_file").change((function(){var a=e(this),t=e(this).closest(".review_upload_wrap").find(".review_upload_photo_list");a.isLoading=!0;for(var o=0;o<a.get(0).files.length;o++){var n=new FormData;n.append("type","image"),n.append("file",a.get(0).files[o]),a.showErr||e.ajax({url:bookingCore.url+"/media/private/store",data:n,dataType:"json",type:"post",contentType:!1,processData:!1,success:function(o){if(a.val(""),0===o.status&&bookingCoreApp.showError(o),o.data)if(e(".review_upload_photo_list > .col-md-2").length>5)bookingCoreApp.showError("Maximum upload 6 pictures");else{var n=e('<div class="col-md-2 mb-2"/>'),i=e('<div class="review_upload_item"/>');n.append(i);var r=e("<input/>");r.attr("type","hidden"),r.attr("name",a.data("name")+"[]"),r.val(JSON.stringify(o.data)),i.append(r),i.css({"background-image":"url("+o.data.download+")"}),a.data("multiple")?t.append(n):t.html(n)}},error:function(e){bookingCoreApp.showAjaxError(e),a.val("")}})}e(this).val("")})),e(".review_upload_item").click((function(a){var t=e(a.target).data("target");e(t+" .fotorama").fotorama()})),e(".bc_popup").modal("show").on("hidden.bs.modal",(function(){var a=e(this).attr("id");setCookie(a,1,parseInt(e(this).data("days")))}))})),jQuery((function(e){"use strict";var a=e(".dropdown-notifications"),t=a.find("a[data-toggle]").find(".notification-icon"),o=parseInt(t.html()),n=a.find("ul.dropdown-list-items");if(bookingCore.pusher_api_key&&bookingCore.pusher_cluster)var i=new Pusher(bookingCore.pusher_api_key,{encrypted:!0,cluster:bookingCore.pusher_cluster});e(document).on("click",".markAsRead",(function(a){a.stopPropagation(),a.preventDefault();var t=e(this).data("id"),o=e(this).attr("href");e.ajax({url:bookingCore.markAsRead,data:{id:t},method:"post",success:function(e){window.location.href=o}})})),e(document).on("click",".markAllAsRead",(function(o){o.stopPropagation(),o.preventDefault(),e.ajax({url:bookingCore.markAllAsRead,method:"post",success:function(o){e(".dropdown-notifications").find("li.notification").removeClass("active"),t.text(0),a.find(".notif-count").text(0)}})}));var r=function(e){var i=n.html(),r='<li class="notification active"><div class="media">   <a class="markAsRead p-0" data-id="'+e.idNotification+'" href="'+e.link+'">    <div class="media-left">      <div class="media-object">'+e.avatar+'      </div>    </div>    <div class="media-body">      '+e.message+'      <div class="notification-meta">        <small class="timestamp">about a few seconds ago</small>      </div>    </div>  </a></div></li>';n.html(r+i),o+=1,t.text(o),a.find(".notif-count").text(o)};bookingCore.isAdmin>0&&bookingCore.pusher_api_key&&i.subscribe("admin-channel").bind("App\\Events\\PusherNotificationAdminEvent",r);bookingCore.currentUser>0&&bookingCore.pusher_api_key&&i.subscribe("user-channel-"+bookingCore.currentUser).bind("App\\Events\\PusherNotificationPrivateEvent",r);e(".tabs-box").length&&e(".tabs-box .tab-buttons .tab-btn").on("click",(function(a){a.preventDefault();var t=e(e(this).attr("data-tab"));if(e(t).is(":visible"))return!1;t.parents(".tabs-box").find(".tab-buttons").find(".tab-btn").removeClass("active-btn"),e(this).addClass("active-btn"),t.parents(".tabs-box").find(".tabs-content").find(".tab").fadeOut(0),t.parents(".tabs-box").find(".tabs-content").find(".tab").removeClass("active-tab animated fadeIn"),e(t).fadeIn(300),e(t).addClass("active-tab animated fadeIn")}))}));